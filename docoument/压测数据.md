#### 无负载测试
环境
* 设备信息 56核512G
* web服务跟压测工具在一台机器上面
* 压测工具 wrk : https://github.com/wg/wrk.git
* 数据库 52核512G,Hdd硬盘, 在另外一台机器上面，部署三个mongodb实例(路由,配置,分片)
* 关闭日志输出 

tips
> 测试结果仅仅参考,压测工具仅做开发测试


    go http 无负载，仅返回 200 

        Running 50s test @ http://127.0.0.1:8899/api/v1.0/block
        16 threads and 10000 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
            Latency    16.10ms   64.06ms   1.80s    96.13%
            Req/Sec    45.39k     8.77k   68.78k    65.35%
        Latency Distribution
            50%    3.88ms
            75%   12.08ms
            90%   28.39ms
            99%  142.44ms
        36121814 requests in 50.09s, 2.52GB read
        Socket errors: connect 0, read 540, write 0, timeout 54
        Requests/sec: 721168.55
        Transfer/sec:     51.58MB


    gin 无负载 仅返回 200 

        Running 50s test @ http://127.0.0.1:8899/api/v1.0/block
        16 threads and 10000 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
            Latency    36.81ms   56.76ms   1.87s    90.39%
            Req/Sec    24.97k     3.89k   67.77k    86.95%
        Latency Distribution
            50%   23.06ms
            75%   55.50ms
            90%   91.93ms
            99%  199.08ms
        19891603 requests in 50.09s, 1.39GB read
        Socket errors: connect 0, read 479, write 0, timeout 120
        Requests/sec: 397109.77
        Transfer/sec:     28.40MB



    业务web,无负载

        Running 50s test @ http://127.0.0.1:8899/api/v1.0/block
        16 threads and 10000 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
            Latency    40.12ms   65.85ms   1.91s    90.63%
            Req/Sec    22.78k     3.72k   53.97k    85.99%
        Latency Distribution
            50%   24.00ms
            75%   59.31ms
            90%  103.43ms
            99%  223.56ms
        18146459 requests in 50.09s, 2.15GB read
        Socket errors: connect 0, read 133, write 0, timeout 20
        Non-2xx or 3xx responses: 18146459
        Requests/sec: 362276.04
        Transfer/sec:     43.88MB



    业务web, 无db操作

        Running 50s test @ http://127.0.0.1:8899/api/v1.0/block
        16 threads and 10000 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
            Latency    18.70ms   84.28ms   2.00s    97.10%
            Req/Sec     6.80k     8.92k   74.65k    88.66%
        Latency Distribution
            50%    3.58ms
            75%   10.77ms
            90%   25.73ms
            99%  321.42ms
        4883145 requests in 50.10s, 745.11MB read
        Socket errors: connect 0, read 1772, write 0, timeout 4825
        Requests/sec:  97466.68
        Transfer/sec:     14.87MB

 -------------------------       

    业务web，带db操作 ,mondobd失去事务的一致性，代码配置问题？ mongodb自身问题？ 单实例复制集导致？

        Running 50s test @ http://127.0.0.1:8899/api/v1.0/block
        16 threads and 10000 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
            Latency     0.00us    0.00us   0.00us    -nan%
            Req/Sec   130.91    118.97     0.87k    77.14%
        Latency Distribution
            50%    0.00us
            75%    0.00us
            90%    0.00us
            99%    0.00us
        80047 requests in 50.10s, 11.78MB read
        Socket errors: connect 0, read 81, write 0, timeout 80047
        Requests/sec:   1597.90
        Transfer/sec:    240.87KB
        



    








